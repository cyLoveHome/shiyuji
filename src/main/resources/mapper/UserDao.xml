<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shiyuji.cy.dao.UserDao">
	<insert id="addUser" parameterType="User">
		INSERT 
		INTO 
			user
	    VALUES(
			#{uId},
			#{uName},
			#{password},
			#{rId},
			#{bind_email},
			#{code},
			#{state},
			#{headPic},
			#{sex},
			#{birth},
			#{hometown},
			#{create_time},
			#{uInfo}
		)
	</insert>
	
	<update id="updateUser" parameterType="User">
		UPDATE 
			user
		SET
			uId = #{uId},
			uName = #{uName},
			password = #{password},
			rId = #{rId},
			bind_email = #{bind_email},
			code = #{code},
			state = #{state},
			headPic = #{headPic},
			sex = #{sex},
			birth = #{birth},
			hometown = #{hometown},
			create_time = #{create_time},
			uInfo = #{uInfo}
	</update>
	
	
	<update id="deleteByUid" parameterType="String">
		UPDATE 
			user
		SET
			account_state = 0
		WHERE
			uId = #{uId}
	</update>
	
	
	<select id="selectByUid" resultType="User" parameterType="String">
		SELECT 
			* 
		FROM
			user
		WHERE
			uId = #{uId}
	</select>
	
	<select id="selectByName" resultType="User" parameterType="String">
		SELECT 
			* 
		FROM
			user
		WHERE
			uName = #{uName}
		AND
			password = #{password}
	</select>
	
	<select id="selectByEmail" resultType="User" parameterType="String">
		SELECT 
			* 
		FROM
			user
		WHERE
			bind_email = #{bind_email}
		AND
			password = #{password}
	</select>
	
	<select id="selectByUname" resultType="User" parameterType="String">
		SELECT 
			* 
		FROM
			user
		WHERE
			uName 
		LIKE
			'%${uName}%'
	</select>
	
	<select id="selectByEmailAddress" resultType="User" parameterType="String">
		SELECT 
			* 
		FROM
			user
		WHERE
			bind_email = #{bind_email}
	</select>

</mapper>